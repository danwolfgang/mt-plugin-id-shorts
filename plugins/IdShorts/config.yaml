name: Id Shorts
version: 0.9.0
schema_version: 0.1
description: Redirects to posts based on a field on entry

applications:
    cms:
        callbacks:
            template_source.edit_entry: >-
              $IdShorts::IdShorts::CMS::edit_entry_source
            template_source.edit_page: >-
              $IdShorts::IdShorts::CMS::edit_entry_source
            cms_edit.entry: >-
              $IdShorts::IdShorts::CMS::cms_edit_entry
            cms_edit.page: >-
              $IdShorts::IdShorts::CMS::cms_edit_entry
            cms_pre_save.entry: >-
              $IDShorts::IdShorts::CMS::pre_save_entry
            cms_pre_save.page: >-
              $IDShorts::IdShorts::CMS::pre_save_entry
    id_shorts:
        handler: IdShorts::App
        methods:
            redirect: $IdShorts::IdShorts::App::redirect_mode

blog_config_template: config.tmpl
system_config_template: system_config.tmpl

settings:
    track_clicks:
      scope: blog
      default: 0
    url_template:
      scope: blog
      default: "<mt:blogurl><mt:var name='id_shorts_path' />"
    err_doc:
      scope: system
      default: ""

config_settings:
    IdShortsScript:
        default: id-shorts.cgi

object_types:
    entry:
      id_shorts_clicks: integer meta
      id_shorts_path: string meta
    page:
      id_shorts_clicks: integer meta
      id_shorts_path: string meta

tags:
  function:
    entryshorturl: $IdShorts::IdShorts::Tags::short_url
